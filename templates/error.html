{% extends 'base.html' %}
{% block title %}Error {{ status_code }}{% endblock %}
{% block extra_css %}
<style>
.error-hero {position:relative;padding:3rem 1.5rem;border-radius:1.25rem;background:linear-gradient(135deg,#6610f2,#6f42c1,#d63384);color:#fff;overflow:hidden;}
.error-hero:before,.error-hero:after{content:"";position:absolute;border-radius:50%;background:rgba(255,255,255,.08);animation:float 12s linear infinite;}
.error-hero:before{width:260px;height:260px;top:-60px;right:-60px;}
.error-hero:after{width:180px;height:180px;bottom:-50px;left:-40px;animation-direction:reverse;}
@keyframes float {0%{transform:translateY(0) rotate(0deg);}50%{transform:translateY(-25px) rotate(180deg);}100%{transform:translateY(0) rotate(360deg);}}
pre.traceback {max-height:420px;overflow:auto;background:#1b1f24;color:#e6edf3;font-size:.85rem;padding:1rem 1.25rem;border-radius:.75rem;line-height:1.35;border:1px solid #30363d;box-shadow:0 0 0 1px #0d1117 inset,0 0 0 1px rgba(255,255,255,.05);} 
.badge-env {background:rgba(255,255,255,.2);backdrop-filter:blur(4px);}
.copy-btn {position:absolute;top:12px;right:12px;}
.dark-mode pre.traceback {background:#0d1117;color:#e6edf3;}
</style>
{% endblock %}
{% block content %}
<div class="error-hero mb-4">
  <div class="row align-items-center">
    <div class="col-lg-8">
      <h1 class="display-5 fw-bold mb-3">{{ status_code }} - {{ error_title }}</h1>
      <p class="lead mb-0">{{ error_message or 'Something went wrong while processing your request.' }}</p>
      {% if show_details %}
      <span class="badge badge-env mt-3">Detailed mode enabled</span>
      {% endif %}
    </div>
    <div class="col-lg-4 text-lg-end mt-4 mt-lg-0">
  <a href="{{ url_for('dashboard.index') }}" class="btn btn-light btn-lg fw-semibold shadow-sm"><i class="bi bi-house"></i> Dashboard</a>
    </div>
  </div>
</div>

{% if show_details and traceback_str %}
<div class="position-relative mb-4">
  <button class="btn btn-sm btn-outline-light copy-btn" onclick="navigator.clipboard.writeText(document.getElementById('tbtxt').innerText);this.innerText='Copied!';setTimeout(()=>this.innerText='Copy',1800);">Copy</button>
  <pre id="tbtxt" class="traceback">{{ traceback_str }}</pre>
</div>
{% endif %}

<div class="card border-0 shadow-sm">
  <div class="card-body">
    <h5 class="card-title">What can you do?</h5>
    <ul class="mb-0">
      <li>If this keeps happening, contact support or check server logs.</li>
      <li>Return to the previous page and try again.</li>
      {% if show_details %}<li>Provide the above stack trace when reporting the issue.</li>{% endif %}
    </ul>
  </div>
</div>
{% endblock %}
