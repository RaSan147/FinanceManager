{% extends "base.html" %}

{% block title %}Loans{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
    <h4 class="card-title mb-0">Loans</h4>
    <div>
      <button type="button" class="btn btn-light" data-loans-open-tx>
        <i class="bi bi-plus"></i> Add Transaction
      </button>
    </div>
  </div>
  <div class="card-body">
    <div class="table-responsive" data-loans-table>
  <table class="table table-hover loans-table">
        <thead>
          <tr>
            <th>Status</th>
            <th>Direction</th>
            <th>Counterparty</th>
            <th>Principal</th>
            <th>Outstanding</th>
            <th>Currency</th>
            <th>Created</th>
            <th>Closed</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody data-loans-body>
          <tr><td colspan="9" class="text-muted text-center">Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Dynamic behavior handled by loans.js -->
{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function(){
  const btn = document.querySelector('[data-loans-open-tx]');
  if (!btn) return;
  btn.addEventListener('click', function(){
    const url = new URL(window.location.origin + '/transactions');
    url.searchParams.set('openModal','1');
    window.location.href = url.toString();
  });
});
</script>
{% endblock %}
{% endblock %}
