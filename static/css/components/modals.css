/* Modal styling */
.modal-content {
	background: linear-gradient(180deg, var(--bg-secondary), var(--bg-tertiary));
	border: 1px solid var(--border-color);
	border-radius: 16px;
	box-shadow: 0 16px 40px rgba(0, 0, 0, .25), 0 4px 12px rgba(0, 0, 0, .12);
	backdrop-filter: blur(calc(var(--glass-blur) - 2px)) saturate(140%);
	-webkit-backdrop-filter: blur(calc(var(--glass-blur) - 2px)) saturate(140%);
	overflow: hidden;
	position: relative;
}

.modal-header {
	background: linear-gradient(135deg, var(--header-grad-1), var(--header-grad-2));
	border-bottom: 1px solid rgba(var(--accent-primary-bright-rgb), .25);
}

[data-theme="dark"] .modal-header,
body.dark-mode .modal-header {
	border-bottom-color: rgba(var(--accent-primary-brighter-rgb), .35);
}

.modal-title {
	font-weight: 600;
}

.modal-footer {
	border-top: 1px solid var(--border-color);
}

.modal-content input,
.modal-content select,
.modal-content textarea {
	box-shadow: none !important;
}

.modal-backdrop {
	z-index: 1040;
	pointer-events: auto;
}

.modal-backdrop.show {
	backdrop-filter: blur(4px);
	-webkit-backdrop-filter: blur(4px);
}

.modal {
	z-index: 1050;
}

.modal.show .modal-dialog {
	z-index: 1055;
}

/* Diary specific (ensure detail modal above create when both accidentally open) */
#diaryDetailModal.modal { z-index: 1056; }
#diaryDetailModal.modal .modal-dialog { z-index: 1057; }

[data-theme="dark"] .modal-content,
body.dark-mode .modal-content {
	box-shadow: 0 18px 46px rgba(0, 0, 0, .6), 0 6px 18px rgba(0, 0, 0, .4);
}

.modal .input-group-text {
	background-color: var(--bg-tertiary);
	border-color: var(--border-color);
}

.modal [data-symbol-prefix] {
	min-width: 42px;
	justify-content: center;
}

.modal .form-text {
	font-size: .725rem;
}

/* Comment and text formatting styles */
.todo-comment .content,
.diary-comment .content,
[data-todo-detail-description],
[data-diary-detail-content] {
	white-space: pre-wrap; /* Preserve whitespace and wrap lines */
	word-break: break-word;
	line-height: 1.4;
}

/* Markdown formatted text styles */
[data-diary-detail-content] code {
	background-color: var(--bg-secondary);
	padding: 0.125rem 0.25rem;
	border-radius: 0.25rem;
	font-size: 0.875em;
	font-family: 'Courier New', Courier, monospace;
}

[data-diary-detail-content] h3,
[data-diary-detail-content] h4,
[data-diary-detail-content] h5 {
	margin: 1rem 0 0.5rem 0;
}

[data-diary-detail-content] h3:first-child,
[data-diary-detail-content] h4:first-child,
[data-diary-detail-content] h5:first-child {
	margin-top: 0;
}

[data-diary-detail-content] a {
	color: var(--bs-primary);
	text-decoration: none;
}

[data-diary-detail-content] a:hover {
	text-decoration: underline;
}

@media (prefers-reduced-motion:no-preference) {
	.modal.fade .modal-dialog {
		transition: transform .3s ease, opacity .3s ease;
	}
}