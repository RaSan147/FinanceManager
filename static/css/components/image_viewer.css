/* Image Viewer Component */
.fm-image-viewer-backdrop{position:fixed;inset:0;z-index:1100;background:rgba(0,0,0,.82);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .25s ease}
.fm-image-viewer-backdrop.active{opacity:1;pointer-events:auto}
.fm-image-viewer-stage{position:relative;max-width:92vw;max-height:92vh;display:flex;align-items:center;justify-content:center}
.fm-image-viewer-canvas{position:relative;max-width:70vw;max-height:70vh;min-width:200px;min-height:120px;display:flex;align-items:center;justify-content:center;overflow:hidden;touch-action:none;cursor:grab}
.fm-image-viewer-canvas.dragging{cursor:grabbing}
.fm-image-viewer-stage img{max-width:100%;max-height:100%;object-fit:contain;box-shadow:0 0 0 1px rgba(255,255,255,.2),0 4px 28px rgba(0,0,0,.5);border-radius:6px;background:var(--body-bg,#fff);transition:transform .08s linear;user-select:none;pointer-events:none}
.fm-image-viewer-tools{position:absolute;bottom:-52px;left:50%;transform:translateX(-50%);display:flex;gap:6px}
.fm-image-viewer-tool-btn{background:rgba(0,0,0,.55);color:#fff;border:none;border-radius:4px;padding:6px 10px;font-size:14px;cursor:pointer;min-width:48px}
.fm-image-viewer-tool-btn:focus{outline:2px solid #fff}
.fm-image-viewer-close{position:absolute;top:-42px;right:0;background:rgba(0,0,0,.55);color:#fff;border:none;border-radius:4px;padding:6px 10px;font-size:14px;display:flex;align-items:center;gap:6px;cursor:pointer}
.fm-image-viewer-nav{position:absolute;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:12px}
.fm-image-viewer-btn{background:rgba(0,0,0,.55);color:#fff;border:none;border-radius:50%;width:46px;height:46px;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer}
.fm-image-viewer-btn:focus{outline:2px solid #fff}
.fm-image-viewer-prev{left:-70px}
.fm-image-viewer-next{right:-70px}
@media(max-width:900px){.fm-image-viewer-prev{left:-54px}.fm-image-viewer-next{right:-54px}.fm-image-viewer-btn{width:42px;height:42px;font-size:18px}.fm-image-viewer-canvas{max-width:88vw;max-height:70vh}}
/* Comment modal thumbnail sizing */
.todo-comment img[data-viewer-thumb]{max-width:140px;max-height:140px;cursor:pointer;transition:box-shadow .2s ease,transform .2s ease}
.todo-comment img[data-viewer-thumb]:hover{box-shadow:0 0 0 2px var(--primary,#0d6efd);transform:translateY(-2px)}
/* Constrained preview inside comment compose area */
[data-todo-comment-images-preview] img{object-fit:cover}
